(function(a){Drupal.behaviors.verticalTabs={attach:function(b){a(".vertical-tabs-panes",b).once("vertical-tabs",function(){var e=a(":hidden.vertical-tabs-active-tab",this).val();var d;var c=a("> fieldset",this);if(c.length==0){return}var f=a('<ul class="vertical-tabs-list"></ul>');a(this).wrap('<div class="vertical-tabs clearfix"></div>').before(f);c.each(function(){var g=new Drupal.verticalTab({title:a("> legend",this).text(),fieldset:a(this)});f.append(g.item);a(this).removeClass("collapsible collapsed").addClass("vertical-tabs-pane").data("verticalTab",g);if(this.id==e){d=a(this)}});a("> li:first",f).addClass("first");a("> li:last",f).addClass("last");if(!d){if(window.location.hash&&a(this).find(window.location.hash).length){d=a(this).find(window.location.hash).closest(".vertical-tabs-pane")}else{d=a("> .vertical-tabs-pane:first",this)}}if(d.length){d.data("verticalTab").focus()}})}};Drupal.verticalTab=function(c){var b=this;a.extend(this,c,Drupal.theme("verticalTab",c));this.link.click(function(){b.focus();return false});this.link.keydown(function(d){if(d.keyCode==13){b.focus();a("fieldset.vertical-tabs-pane :input:visible:enabled:first").focus();return false}});this.fieldset.bind("summaryUpdated",function(){b.updateSummary()}).trigger("summaryUpdated")};Drupal.verticalTab.prototype={focus:function(){this.fieldset.siblings("fieldset.vertical-tabs-pane").each(function(){var b=a(this).data("verticalTab");b.fieldset.hide();b.item.removeClass("selected")}).end().show().siblings(":hidden.vertical-tabs-active-tab").val(this.fieldset.attr("id"));this.item.addClass("selected");a("#active-vertical-tab").remove();this.link.append('<span id="active-vertical-tab" class="element-invisible">'+Drupal.t("(active tab)")+"</span>")},updateSummary:function(){this.summary.html(this.fieldset.drupalGetSummary())},tabShow:function(){this.item.show();this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first");this.fieldset.removeClass("vertical-tab-hidden").show();this.focus();return this},tabHide:function(){this.item.hide();this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first");this.fieldset.addClass("vertical-tab-hidden").hide();var b=this.fieldset.siblings(".vertical-tabs-pane:not(.vertical-tab-hidden):first");if(b.length){b.data("verticalTab").focus()}return this}};Drupal.theme.prototype.verticalTab=function(c){var b={};b.item=a('<li class="vertical-tab-button" tabindex="-1"></li>').append(b.link=a('<a href="#"></a>').append(b.title=a("<strong></strong>").text(c.title)).append(b.summary=a('<span class="summary"></span>')));return b}})(jQuery);