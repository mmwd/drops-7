(function(a){Drupal.behaviors.batch={attach:function(b,c){a("#progress",b).once("batch",function(){var f=a(this);var g=function(i,h,j){if(i==100){j.stopMonitoring();window.location=c.batch.uri+"&op=finished"}};var d=function(h){f.prepend(a('<p class="error"></p>').html(c.batch.errorMessage));a("#wait").hide()};var e=new Drupal.progressBar("updateprogress",g,"POST",d);e.setProgress(-1,c.batch.initMessage);f.append(e.element);e.startMonitoring(c.batch.uri+"&op=do",10)})}}})(jQuery);