(function(a){Drupal.toggleFieldset=function(b){var d=a(b);if(d.is(".collapsed")){var c=a("> .fieldset-wrapper",b).hide();d.removeClass("collapsed").trigger({type:"collapsed",value:false}).find("> legend span.fieldset-legend-prefix").html(Drupal.t("Hide"));c.slideDown({duration:"fast",easing:"linear",complete:function(){Drupal.collapseScrollIntoView(b);b.animating=false},step:function(){Drupal.collapseScrollIntoView(b)}})}else{d.trigger({type:"collapsed",value:true});a("> .fieldset-wrapper",b).slideUp("fast",function(){d.addClass("collapsed").find("> legend span.fieldset-legend-prefix").html(Drupal.t("Show"));b.animating=false})}};Drupal.collapseScrollIntoView=function(c){var b=document.documentElement.clientHeight||document.body.clientHeight||0;var f=document.documentElement.scrollTop||document.body.scrollTop||0;var e=a(c).offset().top;var d=55;if(e+c.offsetHeight+d>b+f){if(c.offsetHeight>b){window.scrollTo(0,e)}else{window.scrollTo(0,e+c.offsetHeight-b+d)}}};Drupal.behaviors.collapse={attach:function(b,c){a("fieldset.collapsible",b).once("collapse",function(){var h=a(this);var f=location.hash&&location.hash!="#"?", "+location.hash:"";if(h.find(".error"+f).length){h.removeClass("collapsed")}var e=a('<span class="summary"></span>');h.bind("summaryUpdated",function(){var i=a.trim(h.drupalGetSummary());e.html(i?" ("+i+")":"")}).trigger("summaryUpdated");var g=a("> legend .fieldset-legend",this);a('<span class="fieldset-legend-prefix element-invisible"></span>').append(h.hasClass("collapsed")?Drupal.t("Show"):Drupal.t("Hide")).prependTo(g).after(" ");var d=a('<a class="fieldset-title" href="#"></a>').prepend(g.contents()).appendTo(g).click(function(){var i=h.get(0);if(!i.animating){i.animating=true;Drupal.toggleFieldset(i)}return false});g.append(e)})}}})(jQuery);