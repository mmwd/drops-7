(function(a){Drupal.behaviors.blockSettingsSummary={attach:function(b){if(typeof jQuery.fn.drupalSetSummary=="undefined"){return}a("fieldset#edit-path",b).drupalSetSummary(function(c){if(!a('textarea[name="pages"]',c).val()){return Drupal.t("Not restricted")}else{return Drupal.t("Restricted to certain pages")}});a("fieldset#edit-node-type",b).drupalSetSummary(function(c){var d=[];a('input[type="checkbox"]:checked',c).each(function(){d.push(a.trim(a(this).next("label").text()))});if(!d.length){d.push(Drupal.t("Not restricted"))}return d.join(", ")});a("fieldset#edit-role",b).drupalSetSummary(function(c){var d=[];a('input[type="checkbox"]:checked',c).each(function(){d.push(a.trim(a(this).next("label").text()))});if(!d.length){d.push(Drupal.t("Not restricted"))}return d.join(", ")});a("fieldset#edit-user",b).drupalSetSummary(function(d){var c=a('input[name="custom"]:checked',d);if(c.val()==0){return Drupal.t("Not customizable")}else{return c.next("label").text()}})}};Drupal.behaviors.blockDrag={attach:function(d,e){if(typeof Drupal.tableDrag=="undefined"||typeof Drupal.tableDrag.blocks=="undefined"){return}var f=a("table#blocks");var c=Drupal.tableDrag.blocks;c.row.prototype.onSwap=function(g){b(f,this)};Drupal.theme.tableDragChangedWarning=function(){return'<div class="messages warning">'+Drupal.theme("tableDragChangedMarker")+" "+Drupal.t("The changes to these blocks will not be saved until the <em>Save blocks</em> button is clicked.")+"</div>"};c.onDrop=function(){dragObject=this;var i=a(dragObject.rowObject.element).prevAll("tr.region-message").get(0);var j=i.className.replace(/([^ ]+[ ]+)*region-([^ ]+)-message([ ]+[^ ]+)*/,"$2");var h=a("select.block-region-select",dragObject.rowObject.element);if(a("option[value="+j+"]",h).length==0){alert(Drupal.t("The block cannot be placed in this region."));h.change()}else{if(a(dragObject.rowObject.element).prev("tr").is(".region-message")){var g=a("select.block-weight",dragObject.rowObject.element);var k=g[0].className.replace(/([^ ]+[ ]+)*block-weight-([^ ]+)([ ]+[^ ]+)*/,"$2");if(!h.is(".block-region-"+j)){h.removeClass("block-region-"+k).addClass("block-region-"+j);g.removeClass("block-weight-"+k).addClass("block-weight-"+j);h.val(j)}}}};a("select.block-region-select",d).once("block-region-select",function(){a(this).change(function(h){var i=a(this).closest("tr");var g=a(this);c.rowObject=new c.row(i);f.find(".region-"+g[0].value+"-message").nextUntil(".region-message").last().before(i);b(f,i);g.get(0).blur()})});var b=function(g,h){a("tr.region-message",g).each(function(){if(a(this).prev("tr").get(0)==h.element){if((h.method!="keyboard"||h.direction=="down")){h.swap("after",this)}}if(a(this).next("tr").is(":not(.draggable)")||a(this).next("tr").length==0){a(this).removeClass("region-populated").addClass("region-empty")}else{if(a(this).is(".region-empty")){a(this).removeClass("region-empty").addClass("region-populated")}}})}}}})(jQuery);