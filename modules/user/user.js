(function(a){Drupal.behaviors.password={attach:function(b,c){var d=c.password;a("input.password-field",b).once("password",function(){var f=a(this);var i=a(this).parent();var g=a(this).parent().parent();i.addClass("password-parent");a("input.password-confirm",g).parent().prepend('<div class="password-confirm">'+d.confirmTitle+" <span></span></div>").addClass("confirm-parent");var m=a("input.password-confirm",g);var j=a("div.password-confirm",g);var e=a("span",j);var n='<div class="password-strength"><div class="password-strength-text" aria-live="assertive"></div><div class="password-strength-title">'+d.strengthTitle+'</div><div class="password-indicator"><div class="indicator"></div></div></div>';a(m).parent().after('<div class="password-suggestions description"></div>');a(i).prepend(n);var k=a("div.password-suggestions",g).hide();var l=function(){var o=Drupal.evaluatePasswordStrength(f.val(),c.password);if(k.html()!=o.message){k.html(o.message)}if(o.strength==100){k.hide()}else{k.show()}a(i).find(".indicator").css("width",o.strength+"%");a(i).find(".password-strength-text").html(o.indicatorText);h()};var h=function(){if(m.val()){var p=f.val()===m.val();j.css({visibility:"visible"});if(this.confirmClass){e.removeClass(this.confirmClass)}var o=p?"ok":"error";e.html(d["confirm"+(p?"Success":"Failure")]).addClass(o);this.confirmClass=o}else{j.css({visibility:"hidden"})}};f.keyup(l).focus(l).blur(l);m.keyup(h).blur(h)})}};Drupal.evaluatePasswordStrength=function(l,f){var b=0,d=100,e=[];var i=/[a-z]+/.test(l);var g=/[A-Z]+/.test(l);var j=/[0-9]+/.test(l);var c=/[^a-zA-Z0-9]+/.test(l);var k=a("input.username");var h=(k.length>0)?k.val():f.username;if(l.length<6){e.push(f.tooShort);d-=((6-l.length)*5)+30}if(!i){e.push(f.addLowerCase);b++}if(!g){e.push(f.addUpperCase);b++}if(!j){e.push(f.addNumbers);b++}if(!c){e.push(f.addPunctuation);b++}switch(b){case 1:d-=12.5;break;case 2:d-=25;break;case 3:d-=40;break;case 4:d-=40;break}if(l!==""&&l.toLowerCase()===h.toLowerCase()){e.push(f.sameAsUsername);d=5}if(d<60){indicatorText=f.weak}else{if(d<70){indicatorText=f.fair}else{if(d<80){indicatorText=f.good}else{if(d<=100){indicatorText=f.strong}}}}e=f.hasWeaknesses+"<ul><li>"+e.join("</li><li>")+"</li></ul>";return{strength:d,message:e,indicatorText:indicatorText}};Drupal.behaviors.fieldUserRegistration={attach:function(b,d){var c=a("form#field-ui-field-edit-form input#edit-instance-settings-user-register-form");if(c.length){a("input#edit-instance-required",b).once("user-register-form-checkbox",function(){a(this).bind("change",function(f){if(a(this).attr("checked")){c.attr("checked",true)}})})}}}})(jQuery);