(function(a){Drupal.color={callback:function(e,f,c,g,m,d){a("#preview",c).css("backgroundColor",a('#palette input[name="palette[base]"]',c).val());a("#text",c).css("color",a('#palette input[name="palette[text]"]',c).val());a("#text a, #text h2",c).css("color",a('#palette input[name="palette[link]"]',c).val());var h,b;for(i in f.gradients){h=g.unpack(a('#palette input[name="palette['+f.gradients[i]["colors"][0]+']"]',c).val());b=g.unpack(a('#palette input[name="palette['+f.gradients[i]["colors"][1]+']"]',c).val());if(h&&b){var l=[];for(j in h){l[j]=(b[j]-h[j])/(f.gradients[i]["vertical"]?m[i]:d[i])}var k=h;a("#gradient-"+i+" > div",c).each(function(){for(j in k){k[j]+=l[j]}this.style.backgroundColor=g.pack(k)})}}}}})(jQuery);